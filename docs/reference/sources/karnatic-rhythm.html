<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
<head>
<link rel="Stylesheet" type="text/css" href="../cludg.css"/>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>
karnatic-rhythm</title>
</head>
<body>
<div id="navbar">
<table cellspacing="0" cellpadding="0" border="0" style="width: 100%;">
<colgroup span="3">
<col width="0*"/>
<col width="0*"/>
<col width="1*"/>
</colgroup>
<tr>
<td align="left" valign="baseline">
<a href="rhythm.html">
Prev:&nbsp;rhythm</a>
<br/>
<a href="pitch.html">
Next:&nbsp;pitch</a>
</td>
<td>
&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td align="left" valign="baseline">
<span class="upchain">
<b>
karnatic-rhythm</b>
<br/>
<a href="../index.html">
Index</a>
</span>
&nbsp;&nbsp;&nbsp;&nbsp;</td>
</tr>
</table>
</div>
<div class="cludg-doc-body">
<h2>
karnatic-rhythm
</h2>
<table style="width: 100%;" class="summary-table">
<tr class="table-heading-color">
<th class="summary" colspan="2">
Method summary</th>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="karnatic-rhythm.html#_g342864">
gb-plan</a>
</td>
<td class="summary">
(jathi integer) <em>&amp;key</em> (beats nil) (gati 4) (extend 's) (tie-first nil) (beat-duration 1/4)</td>
</tr>
</table>
<table style="width: 100%;" class="summary-table">
<tr class="table-heading-color">
<th class="summary" colspan="2">
Function summary</th>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="karnatic-rhythm.html#_g342868">
accented-yati-phrase</a>
</td>
<td class="summary">
gati pala-lengths gap <em>&amp;rest</em> args <em>&amp;key</em> (type '(:srotovahayati :at-end)) <em>&amp;allow-other-keys</em></td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="karnatic-rhythm.html#_g342855">
anga</a>
</td>
<td class="summary">
anga <em>&amp;optional</em> (laghu-size 3) (beat 1/4)</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="karnatic-rhythm.html#_g342860">
complete-phrase-in-tala</a>
</td>
<td class="summary">
sequence <em>&amp;key</em> (tala *tala*) (append-sam? nil)</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="karnatic-rhythm.html#_g342862">
gen-karnatic-cell</a>
</td>
<td class="summary">
gati jathi position <em>&amp;key</em> (accented? t) (max-number nil) (min-number nil) (first-length nil) (include-length nil) (exclude-length nil) (seed nil)</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="karnatic-rhythm.html#_g342867">
gen-matras</a>
</td>
<td class="summary">
gati jathi jathi-number <em>&amp;key</em> prefix suffix</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="karnatic-rhythm.html#_g342863">
make-karnatic-cycle-fn</a>
</td>
<td class="summary">
positions <em>&amp;key</em> (gati-as-length t) (accented? t) (max-number nil) (min-number nil) (first-length nil) (include-length nil) (exclude-length nil) (seed nil)</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="karnatic-rhythm.html#_g342861">
preview-score-in-tala</a>
</td>
<td class="summary">
score <em>&amp;optional</em> (tala *tala*) (append-sam? nil)</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="karnatic-rhythm.html#_g342856">
tala</a>
</td>
<td class="summary">
angas <em>&amp;optional</em> (laghu-size 3) (beat 1/4)</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="karnatic-rhythm.html#_g342857">
tala-beat-number</a>
</td>
<td class="summary">
tala <em>&amp;optional</em> (beat 1/4)</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="karnatic-rhythm.html#_g342866">
tala-plan</a>
</td>
<td class="summary">
talas <em>&amp;key</em> (tala *tala*) (gati *gati*) (append-sam? nil) (accent '-) (tala-sam-accent '-) (beat-duration 1/4)</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="karnatic-rhythm.html#_g342859">
tala-time-signatures</a>
</td>
<td class="summary">
sequence <em>&amp;optional</em> (tala *tala*)</td>
</tr>
</table>
<div class="defparam">
<div class="defunsignatures">
<a id="_g342858">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
*tala*&nbsp;&nbsp;</td>
<td class="lambda-list">
</td>
<td class="symbol-type">
&nbsp;[Variable]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Globally set default tala. 
 </p>
</div>
</div>
<div class="defparam">
<div class="defunsignatures">
<a id="_g342865">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
*gati*&nbsp;&nbsp;</td>
<td class="lambda-list">
</td>
<td class="symbol-type">
&nbsp;[Variable]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Current globally set gati, used by `tala-plan`. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342864">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
gb-plan&nbsp;&nbsp;</td>
<td class="lambda-list">
(jathi integer) <em>&amp;key</em> (beats nil) (gati 4) (extend 's) (tie-first nil) (beat-duration 1/4)</td>
<td class="symbol-type">
&nbsp;[Method]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Outlines (plans) the rhythmic form of a gati bhedam (gb) sequence. The result is an OMN sequence where each jathi is represented by a single note (i.e. without rhythmic phrasing). 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
jathi (integer): jathi of the result. 
 </p>
</li>
<li>
<p>
beats (number): duration of the result measured in beats. 
 </p>
</li>
<li>
<p>
gati (integer): gati of the result. 
 </p>
</li>
<li>
<p>
extend (s or e): if duration deviates from the duration of a full gati/jathi cycle (i.e., beats is set), whether to cut material (or add rests) at the beginning (s) or end (e). 
 </p>
</li>
<li>
<p>
tie-first (Boolean): if true, the first note of the result is tied to the second note. This is useful, e.g., if the result forms the beginning of a tala/anga and a short note (caused by cutting off notes at the beginning) should be avoided. 
 </p>
</li>
<li>
<p>
beat-duration (rational): duration of the beats used by `beats`. 
 </p>
</li>
</ul>
<h4>
Examples: </h4>
<p>
Full cycle of default gati 4, jathi 3 
 </p>
<pre>
    (gb-plan 3) 
     =&gt; ((3/16) (3/16) (3/16) (3/16)) </pre>
<p>
Full cycle of gati 3, jathi 5 
 </p>
<pre>
    (gb-plan 5 :gati 3) 
     =&gt; ((5/12) (5/12) (5/12)) </pre>
<p>
jathi 3 cut to last 2 beats. 
 </p>
<pre>
    (gb-plan 3 :beats 2) 
     =&gt; ((1/8) (3/16) (3/16)) </pre>
<p>
Tie first note (remainder for cut) to following note. 
 </p>
<pre>
    (gb-plan 3 :beats 2 :tie-first T) 
     =&gt; ((1/8 tie) (3/16) (3/16)) </pre>
<p>
If the duration is larger than *gati*, rests are inserted. 
 </p>
<pre>
    (gb-plan 3 :beats 6) 
     =&gt; ((-3/4) (3/16) (3/16) (3/16) (3/16)) </pre>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342855">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
anga&nbsp;&nbsp;</td>
<td class="lambda-list">
anga <em>&amp;optional</em> (laghu-size 3) (beat 1/4)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Return an anga represented by a rhythmic value of its duration wrapped in a list. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
anga (keyword): either <span class="keyword">
:anudrutam, </span>
<span class="keyword">
:a </span>
(1 beat), <span class="keyword">
:drutam, </span>
<span class="keyword">
:d </span>
(2 beats), <span class="keyword">
:laghu </span>
or <span class="keyword">
:l </span>
(laghu-size beats) 
 </p>
</li>
<li>
<p>
laghu-size (int): number of beats of laghu. Possible values: 3, 4, 5, 7, and 9 
 </p>
</li>
<li>
<p>
beat (ratio): length of a beat 
 </p>
</li>
</ul>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342856">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
tala&nbsp;&nbsp;</td>
<td class="lambda-list">
angas <em>&amp;optional</em> (laghu-size 3) (beat 1/4)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Return a tala represented by a list of angas (see function anga), i.e. a list of rhythmic values, each wrapped in a sublist. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
angas (list of keyword): consisting of either <span class="keyword">
:anudrutam, </span>
<span class="keyword">
:a </span>
(1 beat), <span class="keyword">
:drutam, </span>
<span class="keyword">
:d </span>
(2 beats), <span class="keyword">
:laghu </span>
or <span class="keyword">
:l </span>
(laghu-size beats) 
 </p>
</li>
<li>
<p>
laghu-size (int): number of beats of laghu 
 </p>
</li>
<li>
<p>
beat (ratio): length of a beat 
 </p>
</li>
</ul>
<p>
The seven suladi tala categories collected by Purandaradasa (each with all possible laghu sizes): 
 </p>
<ul>
<li>
<p>
L D L L 
 </p>
</li>
<li>
<p>
L D L 
 </p>
</li>
<li>
<p>
D L 
 </p>
</li>
<li>
<p>
L A D 
 </p>
</li>
<li>
<p>
L D D 
 </p>
</li>
<li>
<p>
L L D D 
 </p>
</li>
<li>
<p>
L 
 </p>
</li>
</ul>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342857">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
tala-beat-number&nbsp;&nbsp;</td>
<td class="lambda-list">
tala <em>&amp;optional</em> (beat 1/4)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Number of beats in tala 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342859">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
tala-time-signatures&nbsp;&nbsp;</td>
<td class="lambda-list">
sequence <em>&amp;optional</em> (tala *tala*)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Return list of OMN time signatures (every anga represented as a separate bar) whose overall duration matches the length of `sequence'. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342860">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
complete-phrase-in-tala&nbsp;&nbsp;</td>
<td class="lambda-list">
sequence <em>&amp;key</em> (tala *tala*) (append-sam? nil)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
For preview within the time signature sequence corresponding to tala. Optionally, append a next tala sam. `sequence' should be a full tala or multiple talas for this to work. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
sequence (OMN sequence) 
 </p>
</li>
<li>
<p>
tala (nested list of durations): a tala as returned by function tala 
 </p>
</li>
<li>
<p>
append-sam? (Boolean): whether or not to append a last beat at the very end 
 </p>
</li>
</ul>
<p>
Note: ties in sequence are preserved, if it contains pitches (a pitch for just the first note is fine), but not for purely rhythmic sequences. 
 </p>
<p>
</p>
<pre>
    TODO: Generalise to better work if sequence is not full tala </pre>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342861">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
preview-score-in-tala&nbsp;&nbsp;</td>
<td class="lambda-list">
score <em>&amp;optional</em> (tala *tala*) (append-sam? nil)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Preview score in correct time signatures for tala and with next tala same appended. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
score (preview-score format score) 
 </p>
</li>
<li>
<p>
tala (nested list of durations): a tala as returned by function tala 
 </p>
</li>
<li>
<p>
append-sam? (Boolean): whether or not to append a last beat at the very end 
 </p>
</li>
</ul>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342862">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
gen-karnatic-cell&nbsp;&nbsp;</td>
<td class="lambda-list">
gati jathi position <em>&amp;key</em> (accented? t) (max-number nil) (min-number nil) (first-length nil) (include-length nil) (exclude-length nil) (seed nil)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Returns a Karnatic rhythmic cell (list of rhythmic values) or a list of such cells (if `position' is a list). The shape of the resulting cell(s) can be controlled in many ways, allowing to generate, e.g., rhythms that are similar even if they are in different gatis or jathis. 
 </p>
<p>
See Reina (2016) for details on terms like gati, jathi and matra. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
gati (integer -- commonly in {3, 4, 5, 7}-- or list of them): gati for the cell(s) to generate. 
 </p>
</li>
<li>
<p>
jathi (integer in range 1-7, or list of them): jathi for the cell(s) to generate. 
 1 and 2 no standard Karnatic jathi, but added for more flexibility preserving consistency. 
 BUG: 7 not yet defined/supported 
 </p>
</li>
<li>
<p>
position (integer, '?, or list of either): specifies which cell of the available options to generate. If no filtering is enabled (see further arguments below) then the list of available options are all the possible standard subdivisions of a 'beat' depending on the current jathi as listed by (Reina, 2016, p. 23f). These options are sorted by the number of notes in rhythmic cells (fewest first), and in case of equal note numbers the length of notes starting with the first note (longer first note first). So, the position 0 is always a single note per beat/cell (length depends on gati and jathi) and so on. If `position' exceeds the number of available options, the last option is return, which is always an even subdivision of the cell in jathi matras. 
 If `position' is '? then the position is randomised. 
 </p>
</li>
<li>
<p>
accented? (Boolean, or binary integer, i.e. 0 or 1): whether the returned cells potentially carry durational accents on the start of the cells (or on an immediately following longer note). If accented? is nil (or 0) then the cell(s) carry a durational accent that is not on the start of the cell. 
 Binary integers are supported so that values for this argument can be generated with Opusmodus' binary number generators. 
 </p>
</li>
<li>
<p>
max-number/min-number (integer or list of them): max/min number of notes in the cell(s). 
 </p>
</li>
<li>
<p>
first-length (ratio or OMN length, or list of either): length of the first note in cell(s). 
 </p>
</li>
<li>
<p>
include-length/exclude-length (ratio or OMN length, or list of either): length values that must be included in or excluded from the cell(s). 
 </p>
</li>
<li>
<p>
seed (integer): the seed to use for the randomised position, is position is '?. 
 </p>
</li>
</ul>
<p>
NOTE: For resulting in a full number of beats, the number of elements in position should be a multiple of gati. Remember that (with constant gati and jathi for one period), gati = number of accents and yati = number of beats. 
 </p>
<p>
</p>
<h4>
Examples: </h4>
<p>
The first position is always a single note per cell (if no other filtering is selected) 
 </p>
<pre>
    (gen-karnatic-cell 4 4 0) </pre>
<p>
Generating multiple cells, and showing the order of cells in this gati and jathi without filtering (only cells carrying potentially a durational accent on the first note of the cell). 
 </p>
<pre>
    (gen-karnatic-cell 4 4 '(0 1 2 3 4)) </pre>
<p>
Setting a different jathi. 
 </p>
<pre>
    (gen-karnatic-cell 4 5 '(0 1 2 3 4)) </pre>
<p>
If position exceeds the range of possible cell, the last cell is chosen (which is always an even subdivision of the full cell length into `yati' matras. 
 </p>
<pre>
    (gen-karnatic-cell 4 4 100) </pre>
<p>
If position receives a list, also all other arguments can be lists (of the same length), e.g., different jathis. Note that equal positions in different jathis tend to result in similar cells. 
 </p>
<pre>
    (gen-karnatic-cell 4 '(3 4 5) '(1 1 1)) </pre>
<p>
Filtering arguments can further shape the result. The meaning of the position argument changes accordingly, always depending on the remaining number of rhythmic options for cells. E.g., the minimum number of notes per cell can be set... 
 </p>
<pre>
    (gen-karnatic-cell 4 4 0 :min-number 2) </pre>
<p>

 ... or the maximum number of notes. Note that the position is randomised here. 
 </p>
<pre>
    (gen-karnatic-cell 4 4 '? :max-number 3) </pre>
<p>
... or the first note value in the cell can be set. 
 </p>
<pre>
    (gen-karnatic-cell 4 4 '(1 1 1) :first-length 1/8) </pre>
<p>
All these filter arguments also support lists for setting different values for each sublist. 
 </p>
<pre>
    (gen-karnatic-cell 4 4 '(0 0) :exclude-length '(e q)) </pre>
<p>
Again, an example with randomised positions, but here the seed is fixed. 
 </p>
<pre>
    (gen-karnatic-cell 4 4 '(? ?) :min-number 2 :seed 1) </pre>
<p>
Filtering can remove all options for cells, in which case nil returned. 
 </p>
<pre>
    (gen-karnatic-cell 4 4 0 :min-number 5) </pre>
<p>
You can of course overwrite the resulting time signature with `omn-to-time-signature'. If you want to keep track of where the accents are located, you could mark them before this transformation. You could then manually later revise the notation to instead you the beam-breaking that Reina recommends. 
 
 </p>
<pre>
    (omn-to-time-signature  
      (articulate-bars (gen-karnatic-cell 4 5 '(0 6 3 2 1 0)) 
                        :accent 'marc) 
     '(4 4)) </pre>
<p>
For more examples see also https://opusmodus.com/forums/topic/1097-updated-library-of-many-custom-opusmodus-functions/?tab=comments#comment-3497 
 </p>
<p>
You may want to consider further transforming results with rhythm transformations functions like, e.g., `tie-whole-notes'. 
 </p>
<p>
</p>
<h4>
BUGS: </h4>
<p>
The argument min-number is seemingly not fully working yet: 
 </p>
<p>
</p>
<pre>
    (gen-karnatic-cell 4 5 '(? ? ? ?) :min-number '(3 3 3 3) :seed 1) 
     =&gt; ((1/8 1/8 1/16) (3/16 1/16 1/16) (1/16 1/16 1/16 1/16 1/16) (1/8 1/8 1/16))  </pre>
<p>
</p>
<h4>
Notes: </h4>
<p>
</p>
<ul>
<li>
<p>
Reina, R. (2016) Applying Karnatic Rhythmical Techniques to Western Music. Routledge. 
 </p>
</li>
</ul>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342863">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
make-karnatic-cycle-fn&nbsp;&nbsp;</td>
<td class="lambda-list">
positions <em>&amp;key</em> (gati-as-length t) (accented? t) (max-number nil) (min-number nil) (first-length nil) (include-length nil) (exclude-length nil) (seed nil)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Return function similar to gen-karnatic-cell, but with a predefined list of positions. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
gati-as-length (Boolean): if true, uses gati number elements of the positions (results in a full number of beats). gati then must be an integer. Otherwise use the full positions always. 
 Other arguments inherited from gen-karnatic-cell. 
 </p>
</li>
</ul>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342866">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
tala-plan&nbsp;&nbsp;</td>
<td class="lambda-list">
talas <em>&amp;key</em> (tala *tala*) (gati *gati*) (append-sam? nil) (accent '-) (tala-sam-accent '-) (beat-duration 1/4)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Some mini language for outlining the rhythmic form of a tala sequence, in particular gati bhedam sequences. The result is a rhythmic OMN sequence (expressed in the time signature corresponding to `tala`), where each jathi is represented by a single note (i.e. without rhythmic phrasing). 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
talas (nested list): a sequence of talas (or tala groups) expressed in a mini language described below. 
 </p>
</li>
<li>
<p>
tala (nested list of durations): a tala as returned by function `tala`. 
 </p>
</li>
<li>
<p>
gati (integer): the default gati of the result. 
 </p>
</li>
<li>
<p>
append-sam? (Boolean): whether or not to append a last beat at the very end. 
 </p>
</li>
<li>
<p>
accent (symbol): articulation to use on every first note of a jathis. 
 </p>
</li>
<li>
<p>
tala-sam-accent (symbol): articulation to use on every first note of a tala (group). Intended for debugging/proofreading results. 
 </p>
</li>
<li>
<p>
beat-duration (rational): duration of a beat (for the symbol `beat`). 
 </p>
</li>
</ul>
<p>
Each element of `talas` is a sublist in the following format. Within such sublist, an integer represents a full jathi cycle (i.e. a gati bhedam sequence with constant jathi starting and ending on a beat). The integer specifies the jathi and also the duration of that cycle measured in beats. The symbol `beat` represents a full beat in the result, while the symbol tied-beat is a beat tied to whatever follows. Additionally, any other rhythmic OMN sequence can occur within a tala specification (inserted into the tala time signatures in the result). For example, a partial jathi cycle can be expressed with the function `gb-plan` as demonstrated in an example below. 
 </p>
<p>
IMPORTANT: It is the responsibility of the user to ensure that the elements within a tala spec actually 'fit' into the given tala. This freedom allows to compose gati bhedam sequences that last multiple talas. However, with the argument `tala-sam-accent` it is easy to ensure that the beginnings of all tala (groups) fall on the intended metric position. 
 </p>
<p>
</p>
<h4>
Examples: </h4>
<p>
A specification of two L D5 talas in gati 5. The first tala is rather simple and accents tala an anga sam. The second tala is a gati bhedam sequence of two full cycles that nevertheless ends on tala sam again. 
 </p>
<p>
</p>
<pre>
    (setf *tala* (tala '(:d :l) 5)) </pre>
<p>
</p>
<pre>
    (tala-plan '(;; beat expands to '((1/4)) 
     	        (beat beat 5) 
     	        ;; gati bhedam 
     	        (3 4)) 
     	       ;; global gati of the result 
     	       :gati 5) </pre>
<p>
An example demonstrating further tala plan features. 
 </p>
<p>
</p>
<pre>
    (tala-plan `((beat beat 5) 
     	         ;; partial gati bhedam cycle 
     	         ;; NOTE: the global gati is not inherited by independent  
                  ;; functions like gb-plan and therefore set again  
     	         (beat beat beat beat ,(gb-plan 4 :beats 3 :gati 5)) 
     	         ;; tala group lasting over two talas with a change of gati 
     	         (4 4 6 :gati 3) 
     	         ;; simple reprise 
     	         (beat beat 5)) 
     	       :gati 5 
     	       ;; Append a tala sam at the end 
     	       :append-sam? T) </pre>
<p>
Polyphonic example: monophonic results of tala-plan combined in polyphonic score To have multiple 
 voices with longer tala sequences more easily synchornised, consider somehow splitting the tala 
 sequences into multiple calls of `tala-plan` per part. 
 </p>
<p>
</p>
<pre>
    `(:treble ,(tala-plan '((beat beat 5))) 
       :bass ,(tala-plan '((3 4)))) </pre>
<p>

 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342867">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
gen-matras&nbsp;&nbsp;</td>
<td class="lambda-list">
gati jathi jathi-number <em>&amp;key</em> prefix suffix</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Generates a sequence of matras (equal note durations) where `gati' defines the beat subdivision, `jathi' the number of matras per 'bar' (sublist) and `jathi-number' the resulting number of sublists. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
gati (int) 
 </p>
</li>
<li>
<p>
jathi (int) 
 </p>
</li>
<li>
<p>
jathi-number (int) 
 </p>
</li>
<li>
<p>
prefix (length value or length sequence, possibly nested): preceeding phrase 
 </p>
</li>
<li>
<p>
suffix (length value or length sequence, possibly nested): succeeding phrase 
 </p>
</li>
</ul>
<h4>
Examples: </h4>
<p>
gati 5 (quintuplets), jathi 4 
 </p>
<pre>
    (gen-matras 5 4 3) </pre>
<p>
gati 5 (quintuplets), jathi 4, but preceeded by a quarter note rest. 
 </p>
<pre>
    (gen-matras 5 4 3 :prefix '-q) </pre>
<p>
</p>
<h4>
Notes: </h4>
<p>
See Reina (2016) for details on the terms matras, gati and jathi. 
 
 </p>
<ul>
<li>
<p>
Reina, R. (2016) Applying Karnatic Rhythmical Techniques to Western Music. Routledge. 
 </p>
</li>
</ul>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342868">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
accented-yati-phrase&nbsp;&nbsp;</td>
<td class="lambda-list">
gati pala-lengths gap <em>&amp;rest</em> args <em>&amp;key</em> (type '(:srotovahayati :at-end)) <em>&amp;allow-other-keys</em></td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Generates the matras sequence for a yati phrase, see Reina (2016, p. 205ff) for details. Resulting sublists are jathis for potential post-processing (e.g., adding an accent on their first notes) before redefining the metric structure (usually to follow the tala, e.g., with `omn-to-time-signature'). 
 </p>
<p>
NOTE: In contrast to Karnatic music, resulting accents are expressed by durational accents by this function. Hence the word `accented' in the function name. 
 
 </p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
gati (OMN length): beat subdivision 
 </p>
</li>
<li>
<p>
pala-lengths (list of ints): number of matras per pala 
 </p>
</li>
<li>
<p>
gap (OMN length, typically a rest): length of gaps between palas (always constant). For mridangamyati phrases, when you need different gap lengths, simply append two calls to the present function. 
 </p>
</li>
<li>
<p>
type (list of two keywords): specifies first the type of the yati phrase (:srotovahayati, where matras are added or <span class="keyword">
:gopuchayati, </span>
where matras are removed over time). Secondly, it sets at which side the pala matras are added or removed (:at-end <span class="keyword">
:at-front). </span>
There are four combinations in total. You can compose mridangamyati and damaruyati yati phrases by combining the results of two calls of this function. Note that inserting matras in the middle is currently not supported. 
 </p>
</li>
</ul>
<p>
Additionally, all `durational-accent' key args are supported. 
 </p>
<p>
</p>
<h4>
Examples: </h4>
<pre>
    (accented-yati-phrase 's '(4 7 10 13) '-e :type '(:srotovahayati :at-end) :divide-prob 0.3 :merge-prob 0.7 :seed 1) </pre>
<p>
</p>
<pre>
    (accented-yati-phrase '3q '(4 7 10 13) '-3e :type '(:gopuchayati :at-front) :divide-prob 0.7 :merge-prob 0.5 :seed 3) </pre>
<p>
</p>
<h4>
Notes: </h4>
<p>
</p>
<ul>
<li>
<p>
Reina, R. (2016) Applying Karnatic Rhythmical Techniques to Western Music. Routledge. 
 
 </p>
</li>
</ul>
</div>
</div>
</div>
<div class="cludg-footer">
Generated by&nbsp;<a href="mailto:ihatchondo@common-lisp.net" lang="en">
CLDOC</a>
- 2021-04-05 15:07:07</div>
</body>
</html>
