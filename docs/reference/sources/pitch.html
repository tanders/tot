<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
<head>
<link rel="Stylesheet" type="text/css" href="../cludg.css"/>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>
pitch</title>
</head>
<body>
<div id="navbar">
<table cellspacing="0" cellpadding="0" border="0" style="width: 100%;">
<colgroup span="3">
<col width="0*"/>
<col width="0*"/>
<col width="1*"/>
</colgroup>
<tr>
<td align="left" valign="baseline">
<a href="karnatic-rhythm.html">
Prev:&nbsp;karnatic-rhythm</a>
<br/>
<a href="tuning.html">
Next:&nbsp;tuning</a>
</td>
<td>
&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td align="left" valign="baseline">
<span class="upchain">
<b>
pitch</b>
<br/>
<a href="../index.html">
Index</a>
</span>
&nbsp;&nbsp;&nbsp;&nbsp;</td>
</tr>
</table>
</div>
<div class="cludg-doc-body">
<h2>
pitch
</h2>
<table style="width: 100%;" class="summary-table">
<tr class="table-heading-color">
<th class="summary" colspan="2">
Function summary</th>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342884">
adjust-ambitus</a>
</td>
<td class="summary">
interval sequence <em>&amp;key</em> (direction :keep-high) section omn flat</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342891">
ambitus-field-fenv</a>
</td>
<td class="summary">
sequence ambitus-low ambitus-range <em>&amp;key</em> (chord-ambitus 13) section</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342890">
chord-&gt;line</a>
</td>
<td class="summary">
sequence position</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342873">
chord-multiplication</a>
</td>
<td class="summary">
chord1 chord2</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342894">
chord-over-triad-root</a>
</td>
<td class="summary">
triad chord-form <em>&amp;key</em> (preserve-quality? nil)</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342896">
chord-sequence</a>
</td>
<td class="summary">
pitch interval+chord-form</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342886">
close-variations</a>
</td>
<td class="summary">
sequence <em>&amp;key</em> (transposition 0) (ambitus 0) (invert? 0) (append? nil)</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342879">
fenv-&gt;pitches</a>
</td>
<td class="summary">
fenv n</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342880">
fenv-transpose-pitch</a>
</td>
<td class="summary">
sequence fenv <em>&amp;rest</em> args</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342885">
invert-in-ambitus</a>
</td>
<td class="summary">
sequence</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342889">
line-&gt;chord</a>
</td>
<td class="summary">
sequence chord <em>&amp;key</em> (position :top) flat section</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342888">
make-is-trill-length?</a>
</td>
<td class="summary">
length</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342870">
pc-&gt;pitch</a>
</td>
<td class="summary">
pc octave</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342871">
pcs-&gt;chord</a>
</td>
<td class="summary">
pcs <em>&amp;optional</em> (octave 4)</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342872">
pitch-&gt;pc</a>
</td>
<td class="summary">
pitch</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342882">
pitch-retrograde-omn</a>
</td>
<td class="summary">
sequence <em>&amp;key</em> (flat t)</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342877">
pitches-&gt;fenv</a>
</td>
<td class="summary">
pitches</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342878">
pitches-&gt;integers-&gt;fenv</a>
</td>
<td class="summary">
pitches</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342895">
region-to-interval</a>
</td>
<td class="summary">
symbol</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342881">
rotate-parameter</a>
</td>
<td class="summary">
type n sequence <em>&amp;key</em> section flat</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342883">
set-ambitus</a>
</td>
<td class="summary">
interval sequence <em>&amp;key</em> (direction :keep-high) section omn flat</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342876">
spectra-transpositions-fitting-in-scale</a>
</td>
<td class="summary">
spectra scale</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342874">
stretch-pitches</a>
</td>
<td class="summary">
pitches factor <em>&amp;key</em> (round t)</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342875">
stretch-pitches2</a>
</td>
<td class="summary">
number chord factor <em>&amp;key</em> (round t)</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342892">
thomassen-accents</a>
</td>
<td class="summary">
sequence <em>&amp;optional</em> (format :omn)</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342893">
triad-in-root-position</a>
</td>
<td class="summary">
triad</td>
</tr>
<tr class="table-row-color">
<td class="summary-name">
<a href="pitch.html#_g342887">
trill-selected-notes</a>
</td>
<td class="summary">
sequence test <em>&amp;key</em> (interval 2) (ignore-articulations '(marc))</td>
</tr>
</table>
<div class="defun">
<div class="defunsignatures">
<a id="_g342870">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
pc-&gt;pitch&nbsp;&nbsp;</td>
<td class="lambda-list">
pc octave</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Converts the pitch class `pc' into an OMN pitch in the given `octave'. 
 </p>
<p>
</p>
<h4>
Examples: </h4>
<pre>
    (pc-&gt;pitch 1 4) 
     =&gt; cs4 </pre>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342871">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
pcs-&gt;chord&nbsp;&nbsp;</td>
<td class="lambda-list">
pcs <em>&amp;optional</em> (octave 4)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Expects a list of pitch class integers and returns an Opusmodus chord symbol. 
 </p>
<p>
</p>
<h4>
Examples: </h4>
<pre>
    (pcs-&gt;chord '(0 4 7)) 
     =&gt; c4e4g4 </pre>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342872">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
pitch-&gt;pc&nbsp;&nbsp;</td>
<td class="lambda-list">
pitch</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Converts the OMN pitch `pitch' into a pitch class integer 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342873">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
chord-multiplication&nbsp;&nbsp;</td>
<td class="lambda-list">
chord1 chord2</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Boulez's multiplication of chords. The intervals of `chord1' are built over every pitch of `chord2'. 
 </p>
<p>
</p>
<h4>
Examples: </h4>
<p>
Over every pitch of the C-major triad (chord2) the fifths of chord1 is created. 
 </p>
<p>
</p>
<pre>
    (chord-multiplication '(d4 a4) '(c4 e4 g4)) </pre>
<p>
</p>
<h4>
Notes: </h4>
<p>
Boulez, Pierre (1963) Musikdenken heute. Schott's Söhne, Mainz. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342874">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
stretch-pitches&nbsp;&nbsp;</td>
<td class="lambda-list">
pitches factor <em>&amp;key</em> (round t)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Proportional streching/shrinking of intervals. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
pitches: list of Opusmodus pitches 
 </p>
</li>
<li>
<p>
factor (integer, float or fraction): Factor by which all but the first `pitches' are stretched or shrunk. 
 </p>
</li>
<li>
<p>
round: whether or not to round the result to semitones. Must be T for now, but in future when Opusmodus supports microtonal music this might be refined. 
 </p>
</li>
</ul>
<h4>
Examples: </h4>
<p>
</p>
<pre>
    (stretch-pitches '(c4 e4 g4) 2) 
      
     (stretch-pitches '(c4 e4 g4) 1.5) 
      
     (stretch-pitches '(c4 e4 g4) 2/3)   </pre>
<p>
</p>
<h4>
Notes: </h4>
<p>
Boulez, Pierre (1963) Musikdenken heute. Schott's Söhne, Mainz. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342875">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
stretch-pitches2&nbsp;&nbsp;</td>
<td class="lambda-list">
number chord factor <em>&amp;key</em> (round t)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Creates `number' derivates from chord following a procedure suggested by Giacomo Manzoni where the chord intervals are systematically stretched or shrunk. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
number (int): number of chords to generate. 
 </p>
</li>
<li>
<p>
chord: list of Opusmodus pitches 
 </p>
</li>
<li>
<p>
factor (integer, float or fraction): controls the interval between resulting chord pitches. If 1, the first chord interval is increased by 1 semitone, the second by 2 and so on. If 2, the first interval is increased by 2 semitones, the second by 4 etc. 
 </p>
</li>
</ul>
<h4>
Examples: </h4>
<p>
</p>
<pre>
    (stretch-pitches2 5 '(c4 e4 g4) 1) 
      
     (stretch-pitches2 5 '(c4 e4 g4) 1.5) </pre>
<p>
</p>
<h4>
Notes: </h4>
<p>
Series of conferences by Giacomo Manzoni at Fiesole (Florence, Italy) School of Music from 26th of June to 1st of July, 1988. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342876">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
spectra-transpositions-fitting-in-scale&nbsp;&nbsp;</td>
<td class="lambda-list">
spectra scale</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Function for generating a chord/spectral domain. Returns all transpositions of the given spectra that fit in the given scale (i.e., all their pitch classes are contained in the scale). 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
spectra (OMN chords): a list of untransposed spectra 
 </p>
</li>
<li>
<p>
scale (OMN pitch list) 
 
 </p>
</li>
</ul>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342877">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
pitches-&gt;fenv&nbsp;&nbsp;</td>
<td class="lambda-list">
pitches</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Translates a sequence of pitches into a fenv that linearily inerpolates between the pitches. Fenv values encode pitches by their corresponding MIDI note. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342878">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
pitches-&gt;integers-&gt;fenv&nbsp;&nbsp;</td>
<td class="lambda-list">
pitches</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Variant of pitches-&gt;fenv where pitches are first translated into transposition intervals before turning them into fenvs. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342879">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
fenv-&gt;pitches&nbsp;&nbsp;</td>
<td class="lambda-list">
fenv n</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Translates a fenv into a sequence of pitches. Fenv values encode pitches by their corresponding MIDI note. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342880">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
fenv-transpose-pitch&nbsp;&nbsp;</td>
<td class="lambda-list">
sequence fenv <em>&amp;rest</em> args</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Transposes pitches in sequence by their corresponding fenv value. 
 
 </p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
sequence: (possibly nested) list of pitches or OMN expression 
 </p>
</li>
<li>
<p>
fenv: a fenv that ranges over the full sequence; mapping of notes to fenv value by position in sequence (not temporal position); intervals are specified in semitones; intervals are rounded to their closes integer 
 
 All arguments of pitch-transpose-n are supported as well. 
 </p>
</li>
</ul>
<p>
</p>
<h4>
Examples: </h4>
<pre>
    (fenv-transpose-pitch '(c4 c4 g4 g4) (fenv:linear-fenv (0 0) (1 2))) 
     =&gt; (c4 cs4 gs4 a4) </pre>
<p>
</p>
<pre>
    (fenv-transpose-pitch '(c4 c4 g4 g4) (fenv:linear-fenv (0 0) (1 2)) :ambitus '(d4 a4)) 
     =&gt; (d4 eb4 gs4 a4) </pre>
<p>
</p>
<pre>
    (fenv-transpose-pitch '((q c4 e c4 g4) (h g4)) (fenv:linear-fenv (0 0) (1 2))) 
     =&gt; ((q c4 e cs4 gs4) (h a4)) </pre>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342881">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
rotate-parameter&nbsp;&nbsp;</td>
<td class="lambda-list">
type n sequence <em>&amp;key</em> section flat</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
A variant of Openmusic's `gen-rotate` for rotating individual parameters (e.g., the pitch). 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
type (:length, <span class="keyword">
:pitch, </span>
<span class="keyword">
:velocity, </span>
<span class="keyword">
:duration, </span>
or :articulation): the musical parameter to rotate. 
 </p>
</li>
<li>
<p>
n (positive or negative int; alternatively <span class="keyword">
:left </span>
or :right): how many positions to rotate. 
 </p>
</li>
<li>
<p>
sequence: OMN sequence, can be nested. 
 
 </p>
</li>
</ul>
<h4>
Examples: </h4>
<p>
</p>
<pre>
    (rotate-parameter :pitch -1 '((q f3 q ab3 e c4 bb3 ab3 g3))) </pre>
<p>
NB: Openmusic's `pitch-rotate` does something rather different. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342882">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
pitch-retrograde-omn&nbsp;&nbsp;</td>
<td class="lambda-list">
sequence <em>&amp;key</em> (flat t)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
My version of pitch-retrograde that is working until the original is fixed for OMN expressions with flattened input. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342883">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
set-ambitus&nbsp;&nbsp;</td>
<td class="lambda-list">
interval sequence <em>&amp;key</em> (direction :keep-high) section omn flat</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
This function is similar to the build-in function `ambitus-field', but this function only compresses or expandes a given sequence without transposing it (the originally lowest or highest pitch remains unchanged). Therefore, instead of a range only an interval is specified (by an integer). 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
interval (int): resulting ambitus interval. 
 </p>
</li>
<li>
<p>
sequence: OMN sequence, can be nested. 
 </p>
</li>
<li>
<p>
direction (either <span class="keyword">
:keep-low </span>
or :keep-high): whether the lowest or highest pitch is kept unchanged. 
 </p>
</li>
<li>
<p>
section (list of ints or nil): sublists (bars) to process. Arg is ignored if `flat' is T. 
 </p>
</li>
<li>
<p>
flat (Boolean): whether or not a flat list is processed. 
 </p>
</li>
<li>
<p>
omn (Boolean): whether or not to force OMN style output. 
 </p>
</li>
</ul>
<p>
</p>
<h4>
Examples: </h4>
<p>
</p>
<pre>
    (set-ambitus 12 '(q bb4 a4 c5 b4)) </pre>
<p>
</p>
<pre>
    (set-ambitus 12 '(q bb4 a4 c5 b4) :direction :keep-low) </pre>
<p>
If interval is a negative number, the music is inverted, while the kept highest note is now the lowest (or vice versa, depending on `direction`). 
 </p>
<pre>
    (set-ambitus -12 '(q bb4 a4 c5 b4)) </pre>
<p>
Special case: if interval is 0, then the original sequence is returned (instead of forcing all pitches to the same note). 
 </p>
<pre>
    (set-ambitus 0 '(q bb4 a4 c5 b4)) </pre>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342884">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
adjust-ambitus&nbsp;&nbsp;</td>
<td class="lambda-list">
interval sequence <em>&amp;key</em> (direction :keep-high) section omn flat</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Variant of set-ambitus that contracts or expands the existing ambitus of seq by interval 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342885">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
invert-in-ambitus&nbsp;&nbsp;</td>
<td class="lambda-list">
sequence</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Inverts the pitches of given sequence by preserving its original overall ambitus (instead of inverting around its first pitch or some given pitch). 
 </p>
<p>
</p>
<h4>
Examples: </h4>
<p>
</p>
<pre>
    (invert-in-ambitus '(c4 e4 g4)) 
     =&gt; (g4 eb4 c4) </pre>
<p>
Contrast: `pitch-invert' inverts around first note of `sequence'. 
 </p>
<pre>
    (pitch-invert '(c4 e4 g4)) 
     =&gt; (c4 gs3 f3) </pre>
<p>
Processing of full OMN sequences supported. 
 </p>
<pre>
    (invert-in-ambitus '((q c3 ff snap+gliss q g3 cue) (-e s e3 &gt; pizz gs3 &gt; pizz g3 &gt; pizz e3 &gt; pizz eb3 &gt; pizz gs3 p pizz) (h c4 f pizz))) </pre>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342886">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
close-variations&nbsp;&nbsp;</td>
<td class="lambda-list">
sequence <em>&amp;key</em> (transposition 0) (ambitus 0) (invert? 0) (append? nil)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
This functions conveniently combines several common pitch variation techniques that retain a high degree of recognisability to the original input. 
 </p>
<p>
The input `sequence' for this function could be generated, e.g., with the function `alternate-omns' such that more remote variations are controlled with `alternate-omns' and closer variations with the present function. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
sequence (OMN expression that is either flat, single or double nested): input music. Double nesting is supported to allow for processing sections/motifs that consist of multiple bars. 
 </p>
</li>
<li>
<p>
transposition (int, or list of ints): transposition interval of individual resulting motifs/sections 
 </p>
</li>
<li>
<p>
ambitus (int, or list of ints): ambitus interval of resulting motifs. The lowest pitch of a motif is not affected by this argument, only its highest pitch, as the lowest pitch change be shifted separately with the transposition interval. Negative values result in an inversion of a motif. If 0, ambitus processing is skipped. 
 </p>
</li>
<li>
<p>
invert (0, or 1, or list of such binary numbers): binary numbers indicate whether motifs are inverted or not 
 </p>
</li>
<li>
<p>
append? (Boolean): whether or not nested OMN sequences should be appended instead of been combined in a list. 
 </p>
</li>
</ul>
<p>
If you need more detailed control (e.g., a section argument for some of the variations), then simply use the original build-in function like pitch-transpose, pitch-invert and ambitus-field (or set-ambitus). 
 </p>
<p>
</p>
<h4>
Examples: </h4>
<p>
</p>
<pre>
    (setf motif '((q c3 ff snap+gliss q g3 cue) (-e s e3 &gt; pizz gs3 &gt; pizz g3 &gt; pizz e3 &gt; pizz eb3 &gt; pizz gs3 p pizz) (h c4 f pizz))) </pre>
<p>
</p>
<pre>
    (close-variations (gen-repeat 3 (list motif)) :transposition '(0 12 2) :invert? '(0 1 0) :append? T) </pre>
<p>
</p>
<pre>
    (close-variations (gen-repeat 3 (list motif)) :transposition '(0 1 2) :ambitus '(12 11 10) :append? T) </pre>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342887">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
trill-selected-notes&nbsp;&nbsp;</td>
<td class="lambda-list">
sequence test <em>&amp;key</em> (interval 2) (ignore-articulations '(marc))</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Increases rhythmic interest by subdividing all notes that meet the function test and turning these into a trill. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
sequence: nested OMN sequence (if sequence is not nested, an additional list is implicitly thrown around it) 
 </p>
</li>
<li>
<p>
test: function expecting four arguments of a given note, its length, pitch, velocity and articulation. 
 </p>
</li>
<li>
<p>
interval: integer specifying size and direction of trill interval (positive is up, negative is down). 
 </p>
</li>
<li>
<p>
ignore-articulations: list of articulations not to repeat at inserted notes. 
 </p>
</li>
</ul>
<h4>
Examples: </h4>
<pre>
    (trill-selected-notes '((q c4 e e) (q d4 e e)) (make-is-trill-length? 'e)) 
     =&gt; ((q c4 mf 1/16 c4 mf 1/16 d4 mf 1/16 c4 mf 1/16 d4 mf) (q d4 mf 1/16 d4 mf 1/16 e4 mf 1/16 d4 mf 1/16 e4 mf)) </pre>
<p>

 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342888">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
make-is-trill-length?&nbsp;&nbsp;</td>
<td class="lambda-list">
length</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
[Helper function for trill-selected-notes] Returns a function to be used as `test' argument for function `trill-selected-notes'. The returned function returns true for all notes of the given `length'. 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342889">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
line-&gt;chord&nbsp;&nbsp;</td>
<td class="lambda-list">
sequence chord <em>&amp;key</em> (position :top) flat section</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Builds `chord' over or under every note in `sequence'. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<p>
</p>
<ul>
<li>
<p>
sequence (OMN sequence) 
 </p>
</li>
<li>
<p>
chord (OMN chord or list of chords): if a list, the chords are circled through. 
 </p>
</li>
<li>
<p>
position (either <span class="keyword">
:top </span>
or :bottom): whether the pitches of `sequence' are the top or bottom pitch of the transposed chords. 
 </p>
</li>
</ul>
<h4>
Examples: </h4>
<p>
</p>
<pre>
    (line-&gt;chord '(h c4 ten q d4 stacc e4 stacc) 'c4e4g4) </pre>
<p>
</p>
<pre>
    (line-&gt;chord '((h c4 ten) (q d4 stacc e4 stacc)) 'c4e4g4 :position :bottom :section '(0)) </pre>
<p>
Using a list of different chords 
 </p>
<pre>
    (line-&gt;chord '(h c4 ten q d4 stacc e4 stacc) '(c4e4g4bb4 c4e4a4 c4)) </pre>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342890">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
chord-&gt;line&nbsp;&nbsp;</td>
<td class="lambda-list">
sequence position</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Transforms chords in `sequence' into single notes, extracting the chord pitch at `position' (or the closest pitch, if there is no pitch at `position'). 
 
 </p>
<h4>
Arguments: </h4>
<p>
</p>
<ul>
<li>
<p>
sequence (OMN seq) 
 </p>
</li>
<li>
<p>
position (0-based integer) 
 </p>
</li>
</ul>
<h4>
Examples: </h4>
<p>
</p>
<pre>
    (chord-&gt;line '((h c4e4g4 q) (h.)) 0) </pre>
<p>
</p>
<pre>
    BUG: What to output in case of rests -- a rest (which I would expect) or a pitch? See example above... </pre>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342891">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
ambitus-field-fenv&nbsp;&nbsp;</td>
<td class="lambda-list">
sequence ambitus-low ambitus-range <em>&amp;key</em> (chord-ambitus 13) section</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Variant of built-in function `ambitus-field': this function compresses or expanded the pitch range of the given `sequence', and the boundaries how much this compression/expansion happens can be changed over time with fenvs or value lists. This is a useful function for shaping musical results. 
 </p>
<p>
Note that a change of ambitus values happens only per sublist (bar), which is not really a restriction, as multiple pitches are required to fill a given range. 
 </p>
<p>
If you plan to harmonically revise your music (e.g., with `tonality-map') then you obviously better apply this function before the harmonic revision. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<p>
</p>
<ul>
<li>
<p>
sequence (nested OMN expression) 
 </p>
</li>
<li>
<p>
ambitus-low (fenv or list of integers or pitches): specifies the evolving lower boundary 
 </p>
</li>
<li>
<p>
ambitus-range (fenv, int or list of ints): specifies the evolving distance between the lower and upper boundary 
 </p>
</li>
<li>
<p>
chord-ambitus (integer): max interval between lowest and highest tone of chords to restrict chords to playable range for keyboard player. 
 </p>
</li>
</ul>
<p>
If the argument section is given, then only `(length section)' samples are taken from ambitus-low ambitus-range (if these are fenvs). In other words, in that case the fenv does not range across the full `sequence', but only the selected sections. 
 </p>
<p>
</p>
<h4>
Examples: </h4>
<p>
Static ambitus-range 
 </p>
<pre>
    (ambitus-field-fenv (gen-repeat 4 '((q c4 e4 g4))) 
     		    (fenv:linear-fenv (0 0) (1 12)) 12) </pre>
<p>
Evolving range 
 </p>
<pre>
    (ambitus-field-fenv (gen-repeat 4 '((q c4 e4 g4))) 
     		    (fenv:linear-fenv (0 0) (1 12)) 
     		    (fenv:linear-fenv (0 12) (1 4))) </pre>
<p>
Note that the spread of chords is adapted to the given range 
 </p>
<pre>
    (ambitus-field-fenv (gen-repeat 4 '((q c4e4g4 b4))) 
     		    (fenv:linear-fenv (0 0) (1 12)) 12) </pre>
<p>
</p>
<pre>
    (ambitus-field-fenv (gen-repeat 4 '((q c4e4g4 b4))) 
     		    (fenv:linear-fenv (0 0) (1 12)) 7) </pre>
<p>
However, the spread intervals within chords is automatically adapted to stay within a keyboard players hands. 
 </p>
<pre>
    (ambitus-field-fenv (gen-repeat 4 '((q c4e4g4 b4))) 
     		    (fenv:linear-fenv (0 0) (1 12)) 25) </pre>
<p>
This setting can be adjusted with the argument `chord-ambitus' 
 </p>
<pre>
    (ambitus-field-fenv (gen-repeat 4 '((q c4e4g4 b4))) 
     		    (fenv:linear-fenv (0 0) (1 12)) 
     		    25 :chord-ambitus 15) </pre>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342892">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
thomassen-accents&nbsp;&nbsp;</td>
<td class="lambda-list">
sequence <em>&amp;optional</em> (format :omn)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Expects an OMN sequence (or a different format, see below), and returns a *flat* list of floats representing the associated melodic accent value of each pitch as defined by the Thomassen model. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
format (keyword): sets the format of `sequence'. 
 </p>
<ul>
<li>
<p>
<span class="keyword">
:omn </span>
- full OMN sequence, possibly nested (though the result will be flat) 
 </p>
</li>
<li>
<p>
<span class="keyword">
:pitch </span>
- list of OMN pitches, possibly nested 
 </p>
</li>
<li>
<p>
<span class="keyword">
:midi </span>
- list of MIDI note numbers 
 </p>
</li>
</ul>
</li>
</ul>
<p>
Note that no accent values are available for the first two and the last pitch, therefor nil is return for those pitches. 
 </p>
<p>
</p>
<h4>
Notes: </h4>
<p>
Hack: Quick evaluation: strong melodic accents have an accent value greater than 0.4. 
 </p>
<p>
</p>
<ul>
<li>
<p>
Thomassen, J. M. (1982) Melodic accent: Experiments and a tentative model. The Journal of the Acoustical Society of America. 71 (6), 1596–1605. 
 </p>
</li>
<li>
<p>
Huron, D. &amp; Royal, M. (1996) What is melodic accent? Converging evidence from musical practice. Music Perception. 489–516. 
 </p>
</li>
</ul>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342893">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
triad-in-root-position&nbsp;&nbsp;</td>
<td class="lambda-list">
triad</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Return the given major or minor triad in root position. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
triad (OPMO chord): a major or minor triad of exactly three pitches in any position 
 </p>
</li>
</ul>
<h4>
Examples: </h4>
<p>
</p>
<pre>
    (triad-in-root-position 'e4g4c5) </pre>
<p>
=&gt; c4e4g4 
 </p>
<p>
NOTE: Result currently always in close position. 
 </p>
<pre>
    (triad-in-root-position 'e3a4c6) </pre>
<p>
=&gt; a2c3e3 
 </p>
<p>
BUG: Currently the pitch order must be in some rotated from of root, third, fifth. 
 The following is currently not supported. 
 </p>
<pre>
    (triad-in-root-position 'a2e5c6) </pre>
<p>
=&gt; c4e4g4 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342894">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
chord-over-triad-root&nbsp;&nbsp;</td>
<td class="lambda-list">
triad chord-form <em>&amp;key</em> (preserve-quality? nil)</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
Change the chord type of a give triad to the specified chord type. 
 </p>
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
triad (OPMO chord): a major or minor triad of exactly three pitches in any position 
 </p>
</li>
<li>
<p>
chord-form (list): a chord name symbol or a chord form as expected by expand-chord: (chord &amp;key variant rotate add remove mod assoc seed row) 
 </p>
</li>
<li>
<p>
preserve-quality? (Boolean): not only the root, but also the third of the triad is preserved. 
 </p>
</li>
</ul>
<h4>
Examples: </h4>
<p>
Change a minor chord into an added sixth major chord 
 </p>
<pre>
    (chord-over-triad-root 'eb4g4c5 6) </pre>
<p>
=&gt; c4e4g4a4 
 </p>
<p>
Change a minor chord into an added sixth minor chord (preserve its third) 
 </p>
<pre>
    (chord-over-triad-root 'eb4g4c5 6 :preserve-quality? T) </pre>
<p>
=&gt; c4eb4g4a4 
 </p>
<p>
Added chord form keys are supported 
 </p>
<pre>
    (chord-over-triad-root 'eb4g4c5 '(6 :rotate 1)) </pre>
<p>
=&gt; e4g4a4c5 
 </p>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342895">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
region-to-interval&nbsp;&nbsp;</td>
<td class="lambda-list">
symbol</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="defun">
<div class="defunsignatures">
<a id="_g342896">
</a>
<table cellpadding="0" cellspacing="0" width="100%">
<colgroup span="3">
<col width="0*"/>
<col width="1*"/>
<col width="0*"/>
</colgroup>
<tbody>
<tr>
<td class="symbol-name">
chord-sequence&nbsp;&nbsp;</td>
<td class="lambda-list">
pitch interval+chord-form</td>
<td class="symbol-type">
&nbsp;[Function]</td>
</tr>
</tbody>
</table>
</div>
<div class="doc-body">
<p>
</p>
<h4>
Arguments: </h4>
<ul>
<li>
<p>
pitch (OMN pitch): pitch to start from. 
 </p>
</li>
<li>
<p>
interval+chord-form (list of int and chord-form): progression interval from previous chord and Opusmodus chord-form 
 ;; ;; TODO: later also support symbols, e.g., for Schoenberg's chart of regions 
 ;; - transition (fraction or int) 
 ;; - chord-form (list): a chord name symbol or a chord form as expected by expand-chord: (chord &amp;key variant rotate add remove mod assoc seed row) 
 </p>
</li>
</ul>
</div>
</div>
</div>
<div class="cludg-footer">
Generated by&nbsp;<a href="mailto:ihatchondo@common-lisp.net" lang="en">
CLDOC</a>
- 2021-04-05 15:07:07</div>
</body>
</html>
